# 배터리 로그 분석기 v2.1 - 다중 파일 비교 지원

STM32L412 OnBoard 시스템 및 일반 배터리 로그 분석을 위한 고급 Python GUI 도구

## 🎯 주요 업데이트 (v2.1)

### ✨ 새로운 기능

- **다중 파일 비교**: 여러 배터리 로그 파일을 동시에 선택하여 한 그래프에서 비교 분석
- **파일별 색상 구분**: 최대 10개 파일까지 서로 다른 색상으로 구분 표시
- **선택적 파일 활성화**: 체크박스로 특정 파일만 선택하여 비교
- **통합 통계 비교**: 파일별 주요 통계값을 한눈에 비교
- **비교 모드 토글**: 단일 파일 분석과 다중 파일 비교를 쉽게 전환

## 📊 핵심 기능

### 1. 파일 선택 모드

- **단일 파일 선택**: 📁 버튼으로 기존과 동일한 방식
- **다중 파일 선택**: 📂 버튼으로 여러 파일 동시 선택
- **비교 모드**: 체크박스로 비교 분석 활성화

### 2. 다중 파일 관리

- **파일 목록 표시**: 선택된 모든 파일의 목록과 상태
- **개별 파일 제어**: 체크박스로 각 파일의 표시/숨김 제어
- **파일 제거**: × 버튼으로 개별 파일 제거
- **색상 코딩**: 파일별 고유 색상으로 구분

### 3. 비교 분석 그래프

- **시계열 비교**: 모든 파일의 전압 변화를 한 그래프에 표시
- **히스토그램 비교**: 파일별 전압 분포를 겹쳐서 비교
- **박스플롯 비교**: 파일별 통계적 분포 특성 비교
- **통계 테이블**: 파일별 주요 통계값 요약 표시

### 4. 기존 기능 (v2.0)

- **OnBoard 로그 특화**: STM32L412 OnBoard 모니터 로그 전용 분석
- **실시간 시각화**: 4개 패널 동시 표시 (시계열, 세부분석, 히스토그램, 박스플롯)
- **고급 필터링**: 시간 범위, 전압 범위 필터
- **마우스 상호작용**: 드래그, 줌, 구간 선택
- **종합 보고서**: HTML/PDF 형식 분석 보고서 생성

## 🚀 사용법

### 다중 파일 비교 분석

1. **📂 다중 파일 선택** 버튼 클릭
2. 비교할 배터리 로그 파일들 다중 선택 (Ctrl+클릭)
3. **비교 모드** 체크박스 자동 활성화 확인
4. **🔍 분석 시작** 버튼 클릭
5. 왼쪽 패널에서 원하는 파일만 체크박스로 선택
6. 4개 그래프에서 파일별 비교 결과 확인

### 단일 파일 분석

1. **📁 단일 파일 선택** 버튼 클릭
2. 분석할 로그 파일 선택
3. **🔍 분석 시작** 버튼 클릭
4. 기존과 동일한 상세 분석 진행

### 파일 관리

- **파일 추가**: 다중 선택 시 추가 파일 선택 가능
- **파일 제거**: 각 파일 옆 × 버튼으로 개별 제거
- **선택 제어**: 체크박스로 표시할 파일 선택
- **모드 전환**: 비교 모드 체크박스로 언제든 전환

## 🎨 비교 분석 특징

### 색상 구분 시스템

```
파일 1: 🔴 빨간색 (#FF6B6B)
파일 2: 🔵 청록색 (#4ECDC4)  
파일 3: 🟦 파란색 (#45B7D1)
파일 4: 🟢 초록색 (#96CEB4)
파일 5: 🟡 노란색 (#FECA57)
... (최대 10개 파일)
```

### 비교 그래프 종류

1. **시계열 비교**: 시간에 따른 전압 변화 패턴 비교
2. **분포 비교**: 히스토그램으로 전압 분포 특성 비교
3. **통계 비교**: 박스플롯으로 중앙값, 사분위수, 이상치 비교
4. **수치 비교**: 평균, 표준편차, 범위 등 주요 통계값 표

### 분석 활용 예시

- **배터리 성능 비교**: 같은 조건에서 다른 배터리 성능 비교
- **시간별 변화**: 같은 배터리의 시간에 따른 성능 변화
- **조건별 분석**: 다른 부하 조건에서의 배터리 응답 비교
- **품질 관리**: 생산 배치별 배터리 특성 비교

## 📋 지원 형식 (확장)

### OnBoard 모니터 로그

```
시간 전압 타이머 상태 LED1 LED2 메모
14:30:15.123 23.45 1000 NORMAL ON OFF Battery_OK
```

### CSV 파일

```
timestamp,battery,voltage,status
2024-01-15 14:30:15,23.45,23.45,OK
```

### JSON 로그

```json
{"timestamp": "2024-01-15 14:30:15", "battery": 23.45}
```

## 🔧 설치 및 실행

### 자동 설치 (권장)

```bash
# 배치 파일 실행으로 자동 설치 및 실행
start_analyzer.bat
```

### 수동 설치

```bash
# 필수 패키지 설치
pip install -r requirements.txt

# 프로그램 실행
python battery_log_analyzer.py
```

### 필수 요구사항

- **Python 3.8 이상**
- **Windows 10 이상**
- **메모리**: 최소 4GB RAM (다중 파일 분석 시 8GB 권장)
- **저장공간**: 최소 1GB 여유 공간

## 📈 성능 최적화

### 다중 파일 처리 최적화

- **메모리 효율**: 대용량 파일 스트리밍 처리
- **병렬 처리**: 파일별 독립 분석으로 속도 향상
- **선택적 로딩**: 체크박스로 필요한 파일만 활성화
- **캐시 시스템**: 분석 결과 캐싱으로 재분석 시간 단축

### 권장 사용법

- **파일 수 제한**: 동시 비교는 5개 파일 이하 권장
- **데이터 크기**: 개별 파일당 100MB 이하 권장
- **시간 범위**: 비교 시 유사한 시간 범위 사용 권장
- **파일 형식**: 동일한 데이터 형식의 파일 비교 권장

## 🎯 고급 활용

### 배터리 테스트 시나리오

1. **방전 테스트**: 다양한 부하에서의 방전 특성 비교
2. **온도 영향**: 다른 온도 조건에서의 성능 비교
3. **노화 분석**: 시간에 따른 배터리 성능 변화 추적
4. **제품 검증**: 생산 로트별 품질 검증

### 연구/개발 활용

- **알고리즘 검증**: 배터리 관리 알고리즘 성능 비교
- **하드웨어 테스트**: 다른 회로 설계의 영향 분석
- **소프트웨어 디버깅**: 펌웨어 변경사항의 영향 확인
- **성능 벤치마크**: 표준 테스트 조건에서의 성능 측정

## 📚 추가 자료

### 문서

- `README_GUI.md`: 상세 GUI 사용법
- `battery_analytics.py`: 분석 알고리즘 설명
- `battery_log_parser.py`: 파일 파싱 형식 설명

### 예제 파일

- `test_battery_log.csv`: 테스트용 샘플 데이터
- `test_onboard_log.txt`: OnBoard 형식 샘플
- `comparison_example/`: 다중 파일 비교 예제

## 🐛 문제해결

### 다중 파일 관련

**Q: 파일이 너무 많으면 느려집니다**
A: 5개 이하로 제한하고, 불필요한 파일은 체크 해제하세요.

**Q: 색상이 겹쳐서 구분이 어렵습니다**
A: 파일 목록에서 색상을 확인하고, 범례를 참조하세요.

**Q: 시간 축이 맞지 않습니다**
A: 상대시간 모드를 사용하거나, 시간 동기화를 확인하세요.

### 기존 기능 문제해결

**Q: 파일을 파싱할 수 없습니다**
A: 지원 형식 확인 후, 파일 인코딩을 UTF-8로 변경해보세요.

**Q: 그래프가 표시되지 않습니다**
A: 필터 설정을 확인하고, 데이터 범위를 조정해보세요.

**Q: 프로그램이 멈춥니다**
A: 대용량 파일의 경우 시간 범위를 제한해서 분석하세요.

---


**OnBoard 배터리 분석기 v2.1**
*STM32L412 OnBoard 시스템 전용 고급 분석 도구*
