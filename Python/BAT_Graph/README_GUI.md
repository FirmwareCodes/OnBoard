# 배터리 로그 분석기 GUI 사용 설명서

STM32L412 OnBoard 시스템용 배터리 로그 분석 도구

## 📋 목차
1. [개요](#개요)
2. [설치 및 실행](#설치-및-실행)
3. [사용 방법](#사용-방법)
4. [기능 설명](#기능-설명)
5. [문제해결](#문제해결)

## 🔍 개요

이 프로그램은 STM32L412 OnBoard 시스템에서 수집된 배터리 로그 데이터를 분석하여 다음과 같은 정보를 제공합니다:

### 주요 기능
- **배터리 상태 분석**: 전압, SOC, 건강도 평가
- **부하 성능 분석**: 사용자 입력 부하값(W/A)에 따른 성능 계산
- **사이클 수명 예측**: 사용 패턴 기반 배터리 수명 추정
- **실시간 시각화**: 그래프와 차트로 데이터 표시
- **종합 보고서**: 상세한 분석 결과 문서 생성

### 지원 형식
- OnBoard 모니터 로그 (`시간 전압 타이머 상태 LED1 LED2 메모`)
- CSV 파일
- JSON 로그
- 일반 텍스트 로그

## 🚀 설치 및 실행

### 필수 요구사항
- Windows 10/11
- Python 3.7 이상
- 인터넷 연결 (패키지 설치용)

### 자동 설치 및 실행
1. `run_battery_analyzer.bat` 파일을 더블클릭
2. 필요한 패키지가 자동으로 설치됩니다
3. GUI 프로그램이 자동으로 실행됩니다

### 수동 설치
```bash
# 필요한 패키지 설치
pip install PyQt5 matplotlib pandas numpy

# 프로그램 실행
python battery_analyzer_gui.py
```

## 📱 사용 방법

### 1. 프로그램 시작
![GUI 시작 화면](screenshot_placeholder.png)

### 2. 분석 설정
#### 파일 선택
- **로그 파일**: "파일 선택" 버튼을 클릭하여 분석할 로그 파일 선택
- 지원 형식: `.txt`, `.log`, `.csv` 파일

#### 부하 설정 ⚡
- **부하 타입**: 
  - `watts` (전력) 또는 `amps` (전류) 선택
  - 콤보박스에서 선택하면 단위가 자동 변경됩니다
- **부하 값**: 
  - 테스트 시 걸린 부하의 실제 값 입력
  - 예: 50W LED 부하, 2.5A 모터 부하 등

#### 배터리 설정 🔋
- **배터리 타입**:
  - `6s`: 6셀 직렬 (22.2V 명목전압)
  - `3s`: 3셀 직렬 (11.1V 명목전압)  
  - `single`: 단일 셀 (3.7V 명목전압)
- **배터리 용량**: Ah 단위로 입력 (예: 2.5Ah)

### 3. 분석 시작
- **🔍 분석 시작** 버튼 클릭
- 진행률 바로 분석 진행상황 확인
- 완료 메시지가 나타나면 결과 확인 가능

### 4. 결과 확인

#### 📊 분석 요약 탭
실시간으로 주요 지표들을 확인할 수 있습니다:
- **건강도**: 배터리 상태 점수 (0-100)
- **평균 전압**: 테스트 기간 중 평균 전압
- **테스트 시간**: 로그 수집 기간
- **예상 사이클**: 배터리 수명 (충방전 횟수)
- **효율성**: 부하 대비 성능 등급
- **C-rate**: 방전율 (용량 대비 전류)

#### 📈 그래프 탭
4개의 차트로 구성:
1. **전압 변화**: 시간에 따른 전압 그래프
2. **SOC 변화**: 충전상태 변화 (추정값)
3. **전압 분포**: 전압값 히스토그램
4. **건강도**: 배터리 상태 점수 바차트

#### 📋 상세 분석 탭
원시 데이터를 테이블 형태로 표시:
- 타임스탬프별 상세 정보
- 전압, 상태, 메모 등 모든 컬럼 데이터

#### 📄 보고서 탭
- **종합 보고서 생성**: 모든 분석 결과를 포함한 상세 보고서
- **보고서 저장**: 텍스트 파일로 결과 저장 가능

## 🛠 기능 설명

### 배터리 성능 분석
```
입력: 로그 데이터 + 부하 정보
출력: 
- 기본 통계 (평균전압, 시간, SOC 변화)
- 전압 패턴 분석 (안정성, 급락 감지)
- 부하 성능 (C-rate, 방전시간, 효율성)
- 건강도 평가 (0-100 점수)
```

### 사이클 수명 예측
```
분석 요소:
- DOD (방전 깊이)
- 전압 스트레스
- C-rate 스트레스  
- 온도 스트레스 (추정)

출력:
- 예상 사이클 수명
- 연 단위 사용 가능 기간
- 용량 유지율 곡선
```

### 건강도 평가 기준
- **90-100점**: 우수 (새 배터리 수준)
- **75-89점**: 양호 (정상 사용 가능)
- **60-74점**: 보통 (모니터링 필요)
- **40-59점**: 주의 (성능 저하)
- **0-39점**: 교체 필요 (수명 종료)

## 🔧 문제해결

### 자주 발생하는 문제

#### 1. "Python이 설치되어 있지 않습니다"
**해결방법**: 
- [Python 공식 사이트](https://python.org)에서 Python 3.7+ 설치
- 설치 시 "Add Python to PATH" 옵션 체크

#### 2. "패키지 설치에 실패했습니다"
**해결방법**:
```bash
# 관리자 권한으로 명령프롬프트 실행 후:
pip install --upgrade pip
pip install PyQt5 matplotlib pandas numpy
```

#### 3. "로그 파일 파싱에 실패했습니다"
**원인**: 지원하지 않는 파일 형식
**해결방법**: 
- OnBoard 로그 형식 확인: `시간 전압 타이머 상태 LED1 LED2 메모`
- 파일 인코딩을 UTF-8로 변경
- 빈 줄이나 잘못된 형식의 줄 제거

#### 4. 그래프가 표시되지 않음
**해결방법**:
```bash
pip uninstall matplotlib
pip install matplotlib==3.7.0
```

#### 5. 한글이 깨져서 나옴
**해결방법**: 
- 윈도우 "맑은 고딕" 폰트 설치 확인
- 시스템 로케일을 한국어로 설정

### 로그 파일 형식 예시

#### OnBoard 로그 형식
```
13:49:50		25.22V	00:00		STANDBY		X	X	3725
13:49:51		25.18V	00:01		ACTIVE		O	X	3720
13:49:52		25.15V	00:02		STANDBY		X	X	3715
```

#### CSV 형식
```
timestamp,voltage,status
2024-01-15 13:49:50,25.22,STANDBY
2024-01-15 13:49:51,25.18,ACTIVE
```

### 기술 지원
- **이메일**: [지원팀 이메일]
- **GitHub**: [프로젝트 저장소]
- **문서**: [온라인 문서 링크]

## 📝 업데이트 이력

### v1.0 (2024-01-15)
- 초기 릴리스
- 기본 배터리 분석 기능
- GUI 인터페이스
- 부하 입력 기능
- 사이클 수명 예측
- 종합 보고서 생성

---

**📞 문의사항이 있으시면 언제든지 연락주세요!** 